# /proto

- Directory for protobuf definitions.
- Separate each service into its own folder and place it under this folder like `/proto/tdoo`.

- Protobuf definitions (each file is the _source of truth_ for the service)
    - `*.proto`: definition of **Entity** (which is **Ent Entity**) written by developers
    - `*.svc.proto`: definition of **Service** and **Message** generated by **_go ent_** (_proto-orm-gen-ent_)
    - `*.svc.ext.proto`: extra definition of **Service** and **Message** written by developers

- Compiling flow of proto files:
    1. **_go ent_** generates `.svc.proto` files based on `.proto` files.
    2. **_protoc_** compiles `.proto` files with merging `.svc.proto` and `.svc.ext.proto` files.

- Generated `*.go` files are located under the directory `/pkg/v1/gen`. [(link)](../pkg/v1/gen)
    - `*.pb.go`: **Message** (only **Entity**) generated by **_protoc_**
    - `*.svc.pb.go`: **Message** generated by **_go ent_** (_proto-orm-gen-ent_)
    - `*.svc_grpc.pb.go`: **Service** generated by **_protoc_** and **_go ent_** (_proto-orm-gen-ent_)

- Compile:
    - `*.proto` -> `*.pb.go`
    - `*.svc.proto` + `*.svc.ext.proto`
        - -> `*.svc.pb.go` (Message)
        - -> `*.svc_grpc.pb.go` (Service)
